<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <th:block th:fragment="style">
        <link th:rel="stylesheet" th:href="@{/webjars/bootstrap/5.3.3/css/bootstrap.min.css}"/>
    </th:block>
     
</head>
<h1 th:fragment="pageHeader(nome)" class="pt-4">Best of the year by <span th:text="${nome}"></span></h1>
<body>
    <th:block th:fragment="card(pizza)">
      <div class="col-4">
       <a th:href="@{/pizzas/{id}(id=${pizza.getId()})}">
         <div class="card h-100">
          <img th:src="@{img/{image}(image=${pizza.getUrl()})}" class="card-img-top img-fluid h-100">
          <div class="card-body">
            <div class="row flex-justify-content-between">
              <div class="col-4">
                <span class="card-text" th:text="${pizza.getName()}"></span>
              </div>
              <div class="col-4">
                <a th:href="@{/pizzas/update/{id}(id=${pizza.getId()})}"><span class="btn btn-success">Aggiorna</span></a>
                <span class="btn">Elimina</span>
              </div>
            </div>
          </div>
         </div>
       </a>
      </div>
    </th:block>


    <th:block th:fragment="form(pizza)">
      <div class="row pt-4">
        <form th:action="@{/pizzas/update/{id}(id=${pizza.getId()})}" th:object="${pizza}" id="form" method="post">
            <div class="col">
                <span class="pe-4 fs-5">Nome della pizza</span>
                <input type="text" th:field="*{name}" placeholder="nome..."/> 
                <ul th:if="${#fields.hasErrors('name')}" class="text-danger">
                    <li th:each="err : ${#fields.errors('name')}" th:text="${err}" >...</li>
                </ul>
            </div>
            <div class="col">
                <span class="pe-4 fs-5">Ingredienti</span>
                <input type="text" th:field="*{description}" placeholder="ingredienti..."/> 
                <ul th:if="${#fields.hasErrors('description')}" class="text-danger">
                    <li th:each="err : ${#fields.errors('description')}" th:text="${err}" >...</li>
                </ul>
            </div>
            <div class="col">
                <span class="pe-4 fs-5">Prezzo</span>
                <input type="text" th:field="*{price}" placeholder="prezzo..."/>
                <ul th:if="${#fields.hasErrors('price')}" class="text-danger">
                    <li th:each="err : ${#fields.errors('price')}" th:text="${err}" >...</li>
                </ul>
            </div>
            <div class="col">
                <span class="pe-4 fs-5">Immagine</span>
                <input type="text" th:field="*{url}" placeholder="foto..."/> 
                <ul th:if="${#fields.hasErrors('url')}" class="text-danger">
                    <li th:each="err : ${#fields.errors('url')}" th:text="${err}" >...</li>
                </ul>
            </div>
            <div class="col pt-4"><button class="btn btn-success">Invia</button></div>
        </form>
    </div>
    </th:block>
</body>
</html>